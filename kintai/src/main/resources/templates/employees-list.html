<div th:fragment="page">

  
  <div class="card">
    <div class="h1">社員一覧</div>
    <div class="muted">社員の検索・絞り込みができます</div>

    <div class="spacer"></div>

  
    <form method="get"
          th:action="@{/ui/employees}"
          class="row">

      
      <input class="input"
             type="text"
             name="keyword"
             placeholder="社員名で検索"
             th:value="${keyword}" />

     
      <select name="department">
        <option value="">全ての部署</option>
        <option th:each="d : ${departments}"
                th:value="${d}"
                th:text="${d}"
                th:selected="${d == department}">
        </option>
      </select>

      
      <select name="status">
        <option value="">全ての状態</option>
        <option value="IN" th:selected="${status == 'IN'}">出勤中</option>
        <option value="OUT" th:selected="${status == 'OUT'}">退勤済</option>
        <option value="NONE" th:selected="${status == 'NONE'}">未出勤</option>
      </select>

      <button class="btn btn-primary" type="submit">絞り込み</button>
      <a class="btn" th:href="@{/ui/employees}">クリア</a>
    </form>
  </div>

  
  <div class="card">
    <table class="table">
      <thead>
        <tr>
          <th>名前</th>
          <th>部署</th>
          <th>今日の状態</th>
          <th>操作</th>
        </tr>
      </thead>
      <tbody>

        <tr th:each="e : ${employees}">
          <td th:text="${e.name}"></td>
          <td th:text="${e.department}"></td>

       
          <td>
            <span class="badge"
                  th:text="${todayStatusLabel[e.id]}"
                  th:classappend="
                    ${todayStatusClass[e.id] == 'status-work'} ? ' badge-work' :
                    (${todayStatusClass[e.id] == 'status-in'} ? ' badge-in' : ' badge-out')
                  ">
            </span>
          </td>

          <td>
            <a th:href="@{'/ui/employees/' + ${e.id}}">詳細</a>
          </td>
        </tr>

        
        <tr th:if="${#lists.isEmpty(employees)}">
          <td colspan="4" class="muted">該当する社員がいません</td>
        </tr>

      </tbody>
    </table>
  </div>

</div>
